# 인수 조건 (Top 3)

## 1. 예약 생성

### 5W1H 분석
| 항목 | 내용 |
|------|------|
| Who | 캠핑장 이용을 원하는 고객 |
| What | 특정 사이트의 특정 기간 예약 |
| When | 오늘부터 30일 이내의 미래 날짜 |
| Where | 예약 API (POST /api/reservations) |
| Why | 캠핑장 사이트 사용권 확보 |
| How | 고객 정보와 예약 기간을 입력하여 예약 생성 |

### 인수 조건
> "유효한 미래 기간과 필수 정보를 입력하면 예약이 저장되고 확인코드가 발급되며, 동일 사이트/기간의 중복 예약은 거부된다."

### 검증 포인트
- [ ] 정상적인 예약 생성 시 확인코드(6자리)가 발급된다
- [ ] 과거 날짜로 예약 시 실패한다
- [ ] 종료일이 시작일보다 이전이면 실패한다
- [ ] 이미 예약된 기간에 같은 사이트 예약 시 실패한다
- [ ] 취소된 예약이 있는 기간에는 새 예약이 가능하다
- [ ] 동시에 같은 기간 예약 요청 시 하나만 성공한다

---

## 2. 기간별 사이트 검색

### 5W1H 분석
| 항목 | 내용 |
|------|------|
| Who | 연박 예약을 원하는 고객 |
| What | 특정 기간 동안 예약 가능한 사이트 검색 |
| When | 예약 전 사이트 선택 단계 |
| Where | 사이트 검색 API (GET /api/sites/search) |
| Why | 연박 가능한 사이트 확인 |
| How | 시작일/종료일 입력하여 가용 사이트 조회 |

### 인수 조건
> "시작일부터 종료일까지 전체 기간 동안 예약이 없는 사이트만 검색 결과에 포함된다."

### 검증 포인트
- [ ] 전체 기간 예약 가능한 사이트가 조회된다
- [ ] 중간 날짜에 예약이 있는 사이트는 제외된다
- [ ] 시작일 또는 종료일에만 예약이 있어도 제외된다
- [ ] 대형/소형 필터링이 정상 동작한다
- [ ] 과거 날짜로 검색 시 실패한다

---

## 3. 예약 취소

### 5W1H 분석
| 항목 | 내용 |
|------|------|
| Who | 예약을 취소하려는 고객 |
| What | 기존 예약 취소 및 상태 변경 |
| When | 예약 후 ~ 이용 전 |
| Where | 예약 취소 API (DELETE /api/reservations/{id}) |
| Why | 일정 변경, 취소 환불 |
| How | 예약 ID와 확인코드로 본인 확인 후 취소 |

### 인수 조건
> "확인코드가 일치하면 예약이 취소되고, 당일 취소는 CANCELLED_SAME_DAY, 사전 취소는 CANCELLED 상태가 된다."

### 검증 포인트
- [ ] 올바른 확인코드로 취소 시 성공한다
- [ ] 잘못된 확인코드로 취소 시 실패한다
- [ ] 당일 취소 시 상태가 CANCELLED_SAME_DAY가 된다
- [ ] 사전 취소 시 상태가 CANCELLED가 된다
- [ ] 취소된 예약의 사이트는 재예약이 가능하다
