# language: ko

Feature: 예약 생성
  고객이 캠핑 사이트를 예약할 수 있다

  Background:
    Given 캠핑장 사이트 "A-1"이 등록되어 있다

  Scenario: 유효한 정보로 예약 생성
    When 고객 "홍길동"이 "A-1" 사이트를 "2026-01-20"부터 "2026-01-22"까지 예약한다
    Then 예약이 성공하고 상태는 "CONFIRMED"이다
    And 6자리 확인코드가 발급된다

  Scenario: 과거 날짜로 예약하면 실패
    When 고객 "홍길동"이 과거 날짜로 "A-1" 사이트를 예약한다
    Then 예약이 실패한다

  Scenario: 종료일이 시작일보다 이전이면 실패
    When 고객 "홍길동"이 "A-1" 사이트를 "2026-01-22"부터 "2026-01-20"까지 예약한다
    Then 예약이 실패한다

  Scenario: 동일 사이트에 겹치는 기간으로 예약하면 실패
    Given "A-1" 사이트가 "2026-01-20"부터 "2026-01-22"까지 예약되어 있다
    When 고객 "김철수"가 "A-1" 사이트를 "2026-01-21"부터 "2026-01-23"까지 예약한다
    Then 예약이 실패하고 중복 오류가 발생한다

  Scenario: 취소된 예약이 있는 기간에 새 예약 가능
    Given "A-1" 사이트의 "2026-01-20"부터 "2026-01-22" 예약이 취소되었다
    When 고객 "김철수"가 "A-1" 사이트를 "2026-01-20"부터 "2026-01-22"까지 예약한다
    Then 예약이 성공한다

  Scenario: 동시에 같은 기간 예약 시 하나만 성공
    When 고객 "홍길동"과 "김철수"가 동시에 "A-1" 사이트를 "2026-01-20"부터 "2026-01-22"까지 예약한다
    Then 하나의 예약만 성공한다
